<!DOCTYPE html>
<html>
  <head>
    <title>chip8.js</title>
    <link rel="stylesheet" type="text/css" href="css/display.css">
  </head>
  <body>
    <canvas id="display" width="640px" height="320px"></canvas>
    <input type="file" id="rom-file" onchange="launchRom(this);"></input>
  </body>
  <script type="text/javascript" src="js/rom_loader.js"></script>
  <script type="text/javascript" src="js/cpu.js"></script>
  <script type="text/javascript" src="js/display.js"></script>
  <script type="text/javascript">
    function launchRom(input) {
      var displayDomContainer = document.getElementById("display");

      new RomLoader(input.files[0], function(romData){
        var cpu = new CPU();
        var display = new Display(displayDomContainer);

        cpu.loadRom(romData);

        this.setInterval(cpu.step.bind(cpu), 1000);
      });
    }
  </script>
</html>
